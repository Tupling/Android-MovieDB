package libs;

import java.io.BufferedInputStream;
import java.io.IOException;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;

import org.json.JSONObject;

import android.content.Context;
import android.util.Log;

public class Service {
	
	static Context context;
	
	public static ArrayList<String> movies = new ArrayList<String>();
	public static ArrayList<String> genre = new ArrayList<String>();
	
	
	//tag string
	static String TAG = "SERVICES - APIDATA";
	
	//static variable to check data
	static JSONObject moviesObject;
	
	//get response from URL
	public static String getResponse(URL url){
		//instantiate response string
		String response = "";
		//try 
		try{
			URLConnection urlConn = url.openConnection();
			BufferedInputStream bufferedInput = new BufferedInputStream(urlConn.getInputStream());
			byte[] contextByte = new byte [1024];
			int bytesRead = 0;
			StringBuffer responseBuffer = new StringBuffer();
			while((bytesRead = bufferedInput.read(contextByte)) != -1){
				response = new String(contextByte, 0, bytesRead);
				responseBuffer.append(response);
			}
			
			response = responseBuffer.toString();
			Log.i(TAG, response);
		} catch (IOException IOExc){
			response = "Something happened and we were unable to retreive the data.";
			Log.e(TAG, "Data unable to be retreived.");
			IOExc.printStackTrace();
		}
		return response;
		
	}

}
